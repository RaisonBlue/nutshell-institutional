<script lang="ts" setup>
const props = defineProps({
    style: { type: String as PropType<"filled" | "outlined">, default: "filled" },
    colors: { type: Array as PropType<string[]>, default: () => ["cinnabar", "chinese-black", "chinese-black"] },
    symbol: { type: Boolean, default: false },
    text: { type: Boolean, default: false },
    suffix: { type: Boolean, default: false },
    width: { type: Number, default: 256 },
})

const [w_sym, w_tex, w_suf] = [325, 1100, 172]
const [ml, mr, mb] = [85, 26, 100]
const [hmax, hmin] = [380, 56]

const _key = ([symbol, text, suffix]: [boolean, boolean, boolean]) => `${symbol}:${text}:${suffix}`
const matrix = new Map([
    [_key([true, true, true]), [0, 0, w_sym + ml + w_tex + mr + w_suf, hmax]],
    [_key([true, true, false]), [0, 0, w_sym + ml + w_tex, hmax]],
    [_key([true, false, false]), [0, 0, w_sym + 30, hmax + 6]],
    [_key([false, false, true]), [w_sym + ml + w_tex + mr, mb, w_suf, hmin]],
    [_key([false, true, true]), [w_sym + ml, 0, w_tex + w_suf + mr, hmax]],
    [_key([true, false, true]), [0, 0, w_sym + w_tex + w_suf, hmax]],
    [_key([false, true, false]), [w_sym + ml, 0, w_tex, hmax]],
    [_key([false, false, false]), [0, 0, 0, 0]],
])

const viewbox = computed(() => (matrix.get(_key([props.symbol, props.text, props.suffix])) as number[]).join(" "))
// const [logoColor, textColor, suffixColor] = props.colors
const logoColor = computed(() => props.colors[0])
const textColor = computed(() => props.colors[1])
const suffixColor = computed(() => props.colors[2])
</script>

<template>
	<div class="">
		<!-- Hack to load theme colors at build time for this component. TODO: force inclusion in build -->
		<svg role="img" aria-label="logo nutshell" alt="logo nutshell" :width="width" :viewBox="viewbox" fill="none" xmlns="http://www.w3.org/2000/svg">
			<title>Logo Nutshell</title>
			<g v-if="symbol" :class="`text-${logoColor} `" class="transition-all ease-in-out duration-500">
				<path d="M212 0.300049L191.89 11.8301C185.905 15.2547 180.987 20.2715 177.683 26.3231C174.378 32.3747 172.816 39.224 173.17 46.1101L178.23 149.11L72.5299 80.42L32.6299 103.37L170.15 191.55L219 163.52L212 0.300049Z" fill="currentColor"/>
				<path d="M323.63 294.73L211.38 237.36L319.38 182.12L323.64 179.93V133.93L203.72 196.16C196.14 200.075 189.787 206.004 185.359 213.296C180.931 220.588 178.599 228.959 178.62 237.49V265.49L323.62 340.72L323.63 294.73Z" fill="currentColor"/>
				<path d="M10.8102 253.41C7.25888 255.847 4.39747 259.16 2.50332 263.029C0.609178 266.897 -0.253449 271.189 -0.000939898 275.489C0.251569 279.788 1.61065 283.95 3.94456 287.57C6.27846 291.19 9.50804 294.145 13.3202 296.15L17.5602 298.41L120.83 226.1L119 352.1L159.67 373.65L161.06 210.29L111.28 184L10.8102 253.41Z" fill="currentColor"/>
			</g>

			<g v-if="text" :class="` text-${textColor}`" class="transition-all ease-in-out duration-500">
				<path d="M494.382 139C472.958 139 459.458 144.902 449.264 158.728H448.039V139H411V274H448.039V208.889C448.039 197.371 450.024 189.188 454.271 183.121C460.011 174.938 469.687 170.955 483.86 170.955C495.15 170.955 503.566 173.677 508.892 179.052C516.367 186.612 516.246 197.924 516.177 204.69C516.177 205.329 516.177 205.934 516.177 206.496V274H553V206.487C552.948 189.792 552.94 139 494.382 139Z" fill="currentColor"/>
				<path d="M685.978 204.098C685.978 215.608 683.993 223.801 679.745 229.867C674.003 238.051 664.325 242.035 650.148 242.035C638.864 242.035 630.446 239.312 625.11 233.946C617.633 226.376 617.754 215.064 617.823 208.297C617.823 207.658 617.823 207.053 617.823 206.491V139H581V206.491C581 223.187 581 274 639.598 274C661.018 274 674.53 268.089 684.718 254.271H685.944V273.983H723V139H685.978V204.098Z" fill="currentColor"/>
				<path d="M807.241 101H769.994V139.693H752V170.95H769.994V224.319C769.994 244.14 769.994 274 806.911 274C843.134 274 850.488 271.604 850.783 271.501L851 271.423V235.41H850.662C847.002 235.608 843.629 235.815 840.524 236.005C824.047 237.013 814.95 237.573 810.684 233.583C808.264 231.325 807.215 227.551 807.215 220.941V170.958H850.983V139.693H807.241V101Z" fill="currentColor"/>
				<path d="M948.677 192.464L945.651 192.009C922.439 188.576 918.358 185.288 918.358 179.682C918.358 177.828 919.525 168.574 942.669 168.574C963.106 168.574 972.624 173.578 972.624 184.318V185.786H1010.38V184.326C1010.38 163.646 998.629 139 942.669 139C890.823 139.026 879.974 161.345 879.974 180.146C879.974 207.006 904.033 215.557 942.867 220.639C944.683 220.879 946.611 221.102 948.565 221.334C963.988 223.137 975.78 225.257 975.78 234.64C975.78 241.508 966.538 244.813 947.519 244.813C924.177 244.813 915.047 240.28 915.047 228.639V227.171H877.008V230.073C876.957 236.855 876.861 248.195 886.267 257.612C897.126 268.489 918.082 274 948.513 274C990.01 274 1014 267.467 1014 234.091C1013.97 202.096 979.272 196.98 948.677 192.464Z" fill="currentColor"/>
				<path d="M1127.96 139.481C1105.81 139.481 1090.26 145.909 1080.42 159.134H1079.19V101H1042V274H1079.19V209.12C1079.19 191.91 1085.82 171.327 1117.39 171.327C1152.04 171.327 1152.04 196.144 1152.04 206.736V274H1189V206.736C1189.02 162.74 1167.92 139.481 1127.96 139.481Z" fill="currentColor"/>
				<path d="M1337.12 150.632L1336.68 150.39C1324.6 142.17 1309.44 138 1291.5 138C1245.45 138 1219 162.781 1219 205.983C1219 228.084 1225.36 245.17 1237.92 256.767C1250.28 268.184 1268.29 274 1291.43 274C1333.57 274 1358.93 257.345 1362.85 227.101V226.739H1327.13L1327.05 226.946C1323.41 236.51 1311.12 241.594 1291.5 241.594C1268.99 241.594 1257.74 233.521 1255.09 215.452H1363.41V215.168C1365.27 198.883 1364.29 168.933 1337.12 150.632ZM1326.53 190.758H1256.55C1260.97 177.075 1272.41 170.423 1291.5 170.423C1316.72 170.423 1323.42 180.634 1326.53 190.758Z" fill="currentColor"/>
				<path d="M1432 101H1395V274H1432V101Z" fill="currentColor"/>
				<path d="M1504 101H1467V274H1504V101Z" fill="currentColor"/>
			</g>

			<g v-if="suffix" :class="` text-${suffixColor}`" class="transition-all ease-in-out duration-500">
				<path v-if="suffix" d="M1548.91 144.382H1582V155H1537V101H1548.91V144.382Z" fill="currentColor"/>
				<path v-if="suffix" d="M1650 155H1637.68L1634.46 146.085H1606.54L1603.31 155H1591L1610.55 101H1630.45L1650 155ZM1630.58 135.398L1621.96 111.687H1618.97L1610.35 135.398H1630.58Z" fill="currentColor"/>
				<path v-if="suffix" d="M1707 139.664C1707 150.075 1699.97 155 1691.6 155H1658V101H1685.89C1697.31 101 1704.68 105.516 1704.68 116.336C1704.68 122.24 1702.78 125.495 1699.34 127.301C1704.22 129.031 1706.99 132.55 1707 139.664ZM1669.92 111.71V123.041H1682.97C1688.48 123.041 1692.97 122.837 1692.97 117.376C1692.97 111.914 1688.28 111.71 1682.46 111.71H1669.92ZM1695.31 138.394C1695.31 133.282 1692.04 132.473 1686.53 132.473H1669.92V144.299H1685.02C1690.83 144.299 1695.31 143.95 1695.31 138.394Z" fill="currentColor"/>
			</g>
		</svg>
	</div>
</template>
